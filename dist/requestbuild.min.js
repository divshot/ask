!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.RequestBuilder=t()}}(function(){return function t(e,n,r){function o(s,u){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!u&&c)return c(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var a=n[s]={exports:{}};e[s][0].call(a.exports,function(t){var n=e[s][1][t];return o(n?n:t)},a,a.exports,t,e,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e){function n(t){return this instanceof n?(t||(t={}),this.origin(t.origin),this.headers=f(t.headers),this.xhrOptions=f(t.xhrOptions),this.mocks={},void d.forEach(function(t){this.mocks[t.toLowerCase()]={}},this)):new n(t)}function r(t){return t.slice(1)}var o=t("as-array"),i=t("slasher"),s=t("httpify"),u=t("./lib/url-join"),c=t("promise"),a=t("deap"),f=a.clone,l=a.extend,p=t("./lib/settings"),h=t("./lib/mock-request-response"),d="GET POST PUT DELETE PATCH OPTIONS".split(" ");n.HTTP_METHODS=d,n.join=u,p.mixInto(n.prototype),n.prototype._rawHttp=function(t){return s(t)},n.prototype.promise=function(t){return new c(t)},n.prototype.asPromise=function(t){return this.promise(function(e){e(t)})},n.prototype.asRejectedPromise=function(t){return this.promise(function(e,n){n(t)})},n.prototype.mock=function(t,e,n){return void 0===n?this.mocks[t.toLowerCase()][i(e)]:this.mocks[t.toLowerCase()][i(e)]=n},n.prototype.http=function(t){var e=this._rawHttp,n=r(o(arguments)).join("/"),i=this.mock(t,n);if(i)return i.fn();var s=function(n){var r={url:s.url(),method:t,headers:s.headers,form:n};return l(r,s.xhrOptions||{}),e(r)};return s._uri=n,s._builderInstance=this,s.attributes=f(this.attributes),s.headers=f(this.headers),s.xhrOptions=f(this.xhrOptions),s.queries=f(this.queries),p.mixInto(s),s},n.prototype.when=function(t,e){var n=h(this,t,e);return this.mock(t,e,n)},n.HTTP_METHODS.forEach(function(t){n.prototype[t.toLowerCase()]=function(){var e=o(arguments);return e.unshift(t),this.http.apply(this,e)}}),e.exports=n},{"./lib/mock-request-response":2,"./lib/settings":3,"./lib/url-join":4,"as-array":5,deap:9,httpify:12,promise:19,slasher:21}],2:[function(t,e){e.exports=function(t,e,n){return{context:t,method:e,pathname:n,body:null,statusCode:200,headers:{},respond:function(t){return this.body=t,this.context.mock(this.method,this.pathname,this),this},status:function(t){return void 0===t?this.statusCode:(this.statusCode=t,this)},header:function(t,e){return void 0===e?this.headers[t.toLowerCase()]:(this.headers[t.toLowerCase()]=e,this)},fn:function(){var e=this;return function(){var n=e.statusCode;return 0===n||n>=400&&600>n?t.asRejectedPromise(e):t.asPromise(e)}}}}},{}],3:[function(t,e){function n(t){var e=[];return Object.keys(t).forEach(function(n){var r=t[n];r&&e.push(n+"="+r)},this),e.join("&")}var r=t("mix-into"),o=t("./url-join"),i=t("deap").extend;e.exports=r({origin:function(t){return this.attributes||(this.attributes={}),t?(this.attributes.origin=t,this):this.attributes.origin},header:function(t,e){return this.headers||(this.headers={}),"object"==typeof t?(i(this.headers,t),this):t&&!e?this.headers[t]:(this.headers[t]=e,this)},query:function(t,e){return this.queries||(this.queries={}),t||e?"object"==typeof t?(i(this.queries,t),this):t&&!e?this.queries[t]:(this.queries[t]=e,this):n(this.queries)},xhrOption:function(t,e){return this.xhrOptions||(this.xhrOptions={}),t&&!e?this.xhrOptions[t]:(this.xhrOptions[t]=e,this)},url:function(){var t=this._uri;if(this.origin()&&(t=o(this.origin(),this._uri)),Object.keys(this.queries||{}).length>0){var e=t.indexOf("?")>-1?"&":"?";t=t+e+this.query()}return t||"/"}})},{"./url-join":4,deap:9,"mix-into":17}],4:[function(t,e){function n(t){return t.replace(/[\/]+/g,"/").replace(/\/\?/g,"?").replace(/\/\#/g,"#").replace(/\:\//g,"://")}e.exports=function(){var t=[].slice.call(arguments,0).join("/");return n(t)}},{}],5:[function(t,e){var n=t("lodash.isarguments");e.exports=function(t){return t||(t=[]),n(t)&&(t=[].splice.call(t,0)),Array.isArray(t)?t:[t]}},{"lodash.isarguments":6}],6:[function(t,e){function n(t){return t&&"object"==typeof t&&"number"==typeof t.length&&i.call(t)==r||!1}var r="[object Arguments]",o=Object.prototype,i=o.toString;e.exports=n},{}],7:[function(t,e){function n(){}var r=e.exports={};r.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=n,r.once=n,r.off=n,r.emit=n,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")}},{}],8:[function(t,e,n){(function(t){function e(t,e){for(var n=0,r=t.length-1;r>=0;r--){var o=t[r];"."===o?t.splice(r,1):".."===o?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(t){return o.exec(t).slice(1)};n.resolve=function(){for(var n="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var s=i>=0?arguments[i]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(n=s+"/"+n,o="/"===s.charAt(0))}return n=e(r(n.split("/"),function(t){return!!t}),!o).join("/"),(o?"/":"")+n||"."},n.normalize=function(t){var o=n.isAbsolute(t),i="/"===s(t,-1);return t=e(r(t.split("/"),function(t){return!!t}),!o).join("/"),t||o||(t="."),t&&i&&(t+="/"),(o?"/":"")+t},n.isAbsolute=function(t){return"/"===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(r(t,function(t){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},n.relative=function(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var o=r(t.split("/")),i=r(e.split("/")),s=Math.min(o.length,i.length),u=s,c=0;s>c;c++)if(o[c]!==i[c]){u=c;break}for(var a=[],c=u;c<o.length;c++)a.push("..");return a=a.concat(i.slice(u)),a.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(t){var e=i(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(t,e){var n=i(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},n.extname=function(t){return i(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return 0>e&&(e=t.length+e),t.substr(e,n)}}).call(this,t("/Users/scott/www/divshot/request-builder/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"/Users/scott/www/divshot/request-builder/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":7}],9:[function(t,e){var n=t("./lib/deap"),r=e.exports=n.extend;r(r,{clone:n.clone,extend:n.extend,update:n.update,merge:n.merge,cloneShallow:n.cloneShallow,extendShallow:n.extendShallow,updateShallow:n.updateShallow,mergeShallow:n.mergeShallow})},{"./lib/deap":10}],10:[function(t,e){function n(t){switch(f(t)){case"object":var e=l.call(arguments);return e.unshift({}),o.apply(null,e);case"array":return[].concat(t);case"date":return new Date(t.getTime());case"regexp":return new RegExp(t);default:return t}}function r(t){switch(f(t)){case"object":var e=l.call(arguments);return e.unshift({}),i.apply(null,e);case"array":return t.map(function(t){return r(t)});default:return n(t)}}function o(t){return l.call(arguments,1).forEach(function(e){Object.keys(e).forEach(function(n){t[n]=e[n]})}),t}function i(t){return l.call(arguments,1).forEach(function(e){Object.keys(e).forEach(function(n){"object"===f(e[n])&&"object"===f(t[n])?i(t[n],e[n]):t[n]=r(e[n])})}),t}function s(t){return l.call(arguments,1).forEach(function(e){Object.keys(e).forEach(function(n){t.hasOwnProperty(n)&&(t[n]=e[n])})}),t}function u(t){return l.call(arguments,1).forEach(function(e){var n,o,i,s;Object.keys(e).forEach(function(c){t.hasOwnProperty(c)&&(n=t[c],o=e[c],i=f(n),s=f(o),"object"===s&&"object"===i?u(n,o):"array"===s&&"array"===i?(n.length=0,n.push.apply(n,o.map(function(t){return r(t)}))):t[c]=r(o))})}),t}function c(t){return l.call(arguments,1).forEach(function(e){Object.keys(e).forEach(function(n){t.hasOwnProperty(n)||(t[n]=e[n])})}),t}function a(t){return l.call(arguments,1).forEach(function(e){var n,o,i,s;Object.keys(e).forEach(function(u){n=t[u],o=e[u],i=f(n),s=f(o),"object"===s&&"object"===i?a(n,o):t.hasOwnProperty(u)||(t[u]=r(o))})}),t}var f=t("./typeof"),l=Array.prototype.slice;e.exports={clone:r,cloneShallow:n,extend:i,extendShallow:o,update:u,updateShallow:s,merge:a,mergeShallow:c}},{"./typeof":11}],11:[function(t,e){e.exports=function(t){var e=typeof t;if("object"!==e)return e;if(null===t)return"null";switch(t.constructor){case Array:return"array";case String:return"string";case Number:return"number";case Boolean:return"boolean";case RegExp:return"regexp";case Date:return"date"}return"object"}},{}],12:[function(t,e){var n=t("promise"),r=t("request");e.exports=function(t,e){return new n(function(n,o){r(t,function(t,r,i){var s=r?r.statusCode:0;if(e=e||function(){},t)return e(t),void o(t);if(s>=400&&600>s)return e(null,r),void o(r);try{r.body=JSON.parse(i)}catch(u){}e(null,r),n(r)})})}},{promise:19,request:13}],13:[function(t,e){var n=t("xhr");e.exports=function(t,e){return e=e||function(){},t.data&&!window&&(t.form=t.data),t.form&&window&&(t.body="object"==typeof t.form?JSON.stringify(t.form):t.form),t.data&&(t.body="object"==typeof t.data?JSON.stringify(t.data):t.data),t.url&&window&&(t.uri=t.url),window&&(t.cors=t.withCredentials),n(t,e)}},{xhr:14}],14:[function(t,e){function n(t,e){function n(){4===f.readyState&&o()}function o(){var t=null,n=f.statusCode=f.status,r=f.body=f.response||f.responseText||f.responseXML;if(0===n||n>=400&&600>n){var o=f.responseText||s[String(f.status).charAt(0)];t=new Error(o),t.statusCode=f.status}if(w)try{r=f.body=JSON.parse(r)}catch(i){}e(t,f,r)}function a(t){e(t,f)}"string"==typeof t&&(t={uri:t}),t=t||{},e=i(e);var f=t.xhr||null;!f&&t.cors?f=new c:f||(f=new u);var l=f.url=t.uri||t.url,p=f.method=t.method||"GET",h=t.body||t.data,d=f.headers=t.headers||{},y=!!t.sync,w=!1;return"json"in t&&(w=!0,d["Content-Type"]="application/json",h=JSON.stringify(t.json)),f.onreadystatechange=n,f.onload=o,f.onerror=a,f.onprogress=function(){},f.ontimeout=r,f.open(p,l,!y),t.cors&&(f.withCredentials=!0),y||(f.timeout="timeout"in t?t.timeout:5e3),f.setRequestHeader&&Object.keys(d).forEach(function(t){f.setRequestHeader(t,d[t])}),"responseType"in t&&(f.responseType=t.responseType),f.send(h),f}function r(){}var o=t("global/window"),i=t("once"),s={0:"Internal XMLHttpRequest Error",4:"4xx Client Error",5:"5xx Server Error"},u=o.XMLHttpRequest||r,c="withCredentials"in new u?o.XMLHttpRequest:o.XDomainRequest;e.exports=n},{"global/window":15,once:16}],15:[function(t,e){(function(t){e.exports="undefined"!=typeof window?window:"undefined"!=typeof t?t:{}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],16:[function(t,e){function n(t){var e=!1;return function(){return e?void 0:(e=!0,t.apply(this,arguments))}}e.exports=n,n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0})})},{}],17:[function(t,e){function n(t){return o(this).into(t)}var r=t("deap").cone,o=function(t){return new i(t)},i=function(t){this.source=t};i.prototype.into=function(t){t=t||{};var e,r,o=Object.keys(this.source),i=o.length,s=0;for(s;i>s;s+=1)e=o[s],r=this.source[e],void 0===t[e]&&(t[e]=this.source[e]);return void 0===t.mixInto&&(t.mixInto=n),t},i.prototype.mixInto=function(t){return this.into(t)},i.prototype.create=function(){return r(this.source)},e.exports=o},{deap:9}],18:[function(t,e){"use strict";function n(t){function e(t){return null===a?void l.push(t):void i(function(){var e=a?t.onFulfilled:t.onRejected;if(null===e)return void(a?t.resolve:t.reject)(f);var n;try{n=e(f)}catch(r){return void t.reject(r)}t.resolve(n)})}function s(t){try{if(t===p)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void o(e.bind(t),s,u)}a=!0,f=t,c()}catch(n){u(n)}}function u(t){a=!1,f=t,c()}function c(){for(var t=0,n=l.length;n>t;t++)e(l[t]);l=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");var a=null,f=null,l=[],p=this;this.then=function(t,o){return new n(function(n,i){e(new r(t,o,n,i))})},o(t,s,u)}function r(t,e,n,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=r}function o(t,e,n){var r=!1;try{t(function(t){r||(r=!0,e(t))},function(t){r||(r=!0,n(t))})}catch(o){if(r)return;r=!0,n(o)}}var i=t("asap");e.exports=n},{asap:20}],19:[function(t,e){"use strict";function n(t){this.then=function(e){return"function"!=typeof e?this:new r(function(n,r){o(function(){try{n(e(t))}catch(o){r(o)}})})}}var r=t("./core.js"),o=t("asap");e.exports=r,n.prototype=Object.create(r.prototype);var i=new n(!0),s=new n(!1),u=new n(null),c=new n(void 0),a=new n(0),f=new n("");r.from=r.cast=function(t){if(t instanceof r)return t;if(null===t)return u;if(void 0===t)return c;if(t===!0)return i;if(t===!1)return s;if(0===t)return a;if(""===t)return f;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new r(e.bind(t))}catch(o){return new r(function(t,e){e(o)})}return new n(t)},r.denodeify=function(t,e){return e=e||1/0,function(){var n=this,o=Array.prototype.slice.call(arguments);return new r(function(r,i){for(;o.length&&o.length>e;)o.pop();o.push(function(t,e){t?i(t):r(e)}),t.apply(n,o)})}},r.nodeify=function(t){return function(){var e=Array.prototype.slice.call(arguments),n="function"==typeof e[e.length-1]?e.pop():null;try{return t.apply(this,arguments).nodeify(n)}catch(i){if(null===n||"undefined"==typeof n)return new r(function(t,e){e(i)});o(function(){n(i)})}}},r.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&Array.isArray(arguments[0])?arguments[0]:arguments);return new r(function(e,n){function r(i,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var u=s.then;if("function"==typeof u)return void u.call(s,function(t){r(i,t)},n)}t[i]=s,0===--o&&e(t)}catch(c){n(c)}}if(0===t.length)return e([]);for(var o=t.length,i=0;i<t.length;i++)r(i,t[i])})},r.prototype.done=function(){var t=arguments.length?this.then.apply(this,arguments):this;t.then(null,function(t){o(function(){throw t})})},r.prototype.nodeify=function(t){return null===t||"undefined"==typeof t?this:void this.then(function(e){o(function(){t(null,e)})},function(e){o(function(){t(e)})})},r.prototype.catch=function(t){return this.then(null,t)},r.resolve=function(t){return new r(function(e){e(t)})},r.reject=function(t){return new r(function(e,n){n(t)})},r.race=function(t){return new r(function(e,n){t.map(function(t){r.cast(t).then(e,n)})})}},{"./core.js":18,asap:20}],20:[function(t,e){(function(t){function n(){for(;o.next;){o=o.next;var t=o.task;o.task=void 0;var e=o.domain;e&&(o.domain=void 0,e.enter());try{t()}catch(r){if(c)throw e&&e.exit(),setTimeout(n,0),e&&e.enter(),r;setTimeout(function(){throw r},0)}e&&e.exit()}s=!1}function r(e){i=i.next={task:e,domain:c&&t.domain,next:null},s||(s=!0,u())}var o={task:void 0,next:null},i=o,s=!1,u=void 0,c=!1;if("undefined"!=typeof t&&t.nextTick)c=!0,u=function(){t.nextTick(n)};else if("function"==typeof setImmediate)u="undefined"!=typeof window?setImmediate.bind(window,n):function(){setImmediate(n)};else if("undefined"!=typeof MessageChannel){var a=new MessageChannel;a.port1.onmessage=n,u=function(){a.port2.postMessage(0)}}else u=function(){setTimeout(n,0)};e.exports=r}).call(this,t("/Users/scott/www/divshot/request-builder/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"/Users/scott/www/divshot/request-builder/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":7}],21:[function(t,e){function n(t){return s(i("/",t))}function r(t,e){var r={},o=Object.keys(t),i=o.length,s=0;for(s;i>s;s+=1){var u=o[s],c=e.key===!1?u:n(u),a=t[u];r[c]=e.value===!1?a:"string"==typeof a?n(a):a}return r}var o=t("path"),i=o.join,s=o.normalize,u=e.exports=function(t){return options=arguments[1]||{},"string"==typeof t?n(t):"number"==typeof t?n(t+""):"object"==typeof t?r(t,options):t};e.exports=u},{path:8}]},{},[1])(1)});